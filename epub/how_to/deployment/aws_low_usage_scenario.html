<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Low usage AWS</title>
    
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> 
  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../static_assets.html" title="Static assets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="low_usage_scenario.html" title="Low usage (simplest scenario)"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">fantastico 0.3.0-b104 documentation</a> &raquo;</li>
          <li><a href="../how_to.html" >How to articles</a> &raquo;</li>
          <li><a href="../deployment_how_to.html" accesskey="U">Deployment how to</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="low-usage-aws">
<h1>Low usage AWS</h1>
<img alt="../../_images/low_usage_aws.png" src="../../_images/low_usage_aws.png" />
<p>This scenario is a little bit more complex than <a class="reference internal" href="low_usage_scenario.html"><em>Low usage (simplest scenario)</em></a> but it provides some
advantages:</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Advantages</th>
<th class="head">Disadvantages</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Can be autoscaled.</td>
<td>Requires AWS EC2 instances</td>
</tr>
<tr class="row-odd"><td>Easier crash recovery</td>
<td>Requires manual configuration</td>
</tr>
<tr class="row-even"><td>Very easy monitoring support (CloudWatch)</td>
<td>Requires AWS EBS.</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Requires some AWS know how.</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Static files are not served from a cdn.</td>
</tr>
</tbody>
</table>
<p>This scenario is recommended if you want to rollout you application on AWS infrastructure. Usually it is non expensive
to do this as it requires micro instances and low cost storage. For more information about AWS required components
read:</p>
<blockquote>
<div><ol class="arabic simple">
<li><a class="reference external" href="http://aws.amazon.com/ec2/instance-types/">AWS Instance types</a><span class="link-target"> [http://aws.amazon.com/ec2/instance-types/]</span>.</li>
<li><a class="reference external" href="http://aws.amazon.com/ebs/">AWS EBS</a><span class="link-target"> [http://aws.amazon.com/ebs/]</span>.</li>
</ol>
</div></blockquote>
<div class="section" id="setup">
<h2>Setup</h2>
<ol class="arabic simple">
<li>Create an AWS account. (<a class="reference external" href="http://aws.amazon.com/documentation/gettingstarted/">AWS Getting Started</a><span class="link-target"> [http://aws.amazon.com/documentation/gettingstarted/]</span>).</li>
<li>Create an EC2 instance from AWS Management Console (<a class="reference external" href="http://www.youtube.com/watch?v=WBro0TEAd7g">EC2 setup</a><span class="link-target"> [http://www.youtube.com/watch?v=WBro0TEAd7g]</span>).</li>
<li>SSH on EC2 instance.</li>
<li>Install Fantastico framework on the production machine (<a class="reference internal" href="../../get_started/installation.html"><em>Installation manual</em></a>.).</li>
<li>Goto $FANTASTICO_ROOT</li>
<li>fantastico_setup_low_usage_&lt;os_distribution).sh (e.g fantastico_setup_low_usage_ubuntu.sh)</li>
<li>Done.</li>
</ol>
</div>
<div class="section" id="optimization">
<h2>Optimization</h2>
<p>This scenario can be easily optimized by using <strong>AWS S3</strong> buckets for static files. This ensures faileover for static
files and very easy horizontal scaling for sites. Below you can find the new diagram:</p>
<img alt="../../_images/low_usage_s3_aws.png" src="../../_images/low_usage_s3_aws.png" />
<p>You can read more about <strong>AWS S3</strong> storage on <a class="reference external" href="http://aws.amazon.com/s3/">http://aws.amazon.com/s3/</a>. In this version of fantastico there is no
way to sync static module files with S3 buckets. This feature is going to be implemented in upcoming <strong>Fantastico</strong>
features. As a workaround you can easily copy <strong>static</strong> folder content from each module on S3 using the tool
provided from AWS Management Console.</p>
<p>You can see how to use AWS Management Console S3 tool on <a class="reference external" href="http://www.youtube.com/watch?v=1qrjFb0ZTm8">http://www.youtube.com/watch?v=1qrjFb0ZTm8</a></p>
</div>
<div class="section" id="setup-with-s3">
<h2>Setup with S3</h2>
<ol class="arabic simple">
<li>export ROOT_PASSWD=&lt;your root password&gt;</li>
<li>Create an AWS account. (<a class="reference external" href="http://aws.amazon.com/documentation/gettingstarted/">AWS Getting Started</a><span class="link-target"> [http://aws.amazon.com/documentation/gettingstarted/]</span>).</li>
<li>Create an EC2 instance from AWS Management Console (<a class="reference external" href="http://www.youtube.com/watch?v=WBro0TEAd7g">EC2 setup</a><span class="link-target"> [http://www.youtube.com/watch?v=WBro0TEAd7g]</span>).</li>
<li>SSH on EC2 instance.</li>
<li>Install Fantastico framework on the production machine (<a class="reference internal" href="../../get_started/installation.html"><em>Installation manual</em></a>.).</li>
<li>Goto $FANTASTICO_ROOT/deployment</li>
<li>fantastico_setup_low_usage_s3_&lt;os_distribution).sh &#8211;ipaddress &lt;desired_ip&gt; &#8211;vhost-name &lt;desired_vhost&gt; &#8211;uwsgi-port &lt;uwsgi port&gt; &#8211;root-folder &lt;desired root folder&gt; &#8211;modules-folder &lt;desired modules folder&gt; (e.g fantastico_setup_low_usage_s3_ubuntu.sh &#8211;ipaddress 127.0.0.1 &#8211;vhost-name fantastico-framework.com &#8211;uwsgi-port 12090 &#8211;root-folder `pwd` &#8211;modules-folder /fantastico/samples)</li>
<li>Done.</li>
</ol>
<p>It is usually a good idea to change the number of parallel connections supported by your linux kernel:</p>
<ol class="arabic simple">
<li>sudo nano /etc/sysctl.conf</li>
<li>Search for <strong>net.core.somaxconn</strong>.</li>
<li>If it does not exist you can add net.core.somaxconn = 8192 to the bottom of the file.</li>
<li>Restart the os.</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <div class="footer">
        &copy; Copyright 2013, Radu Viorel Cosnita.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42788125-1', 'rcosnita.github.io');
  ga('send', 'pageview');
</script>

  </body>
</html>