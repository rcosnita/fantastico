<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Step 4 - TODO activate google analytics &mdash; fantastico 0.6.0-b134 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.6.0-b134',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="fantastico 0.6.0-b134 documentation" href="../../index.html" />
    <link rel="up" title="Creating a simple TODO application" href="index.html" />
    <link rel="next" title="Step 5 - TODO final notes" href="step_5_final_notes.html" />
    <link rel="prev" title="Step 3 - TODO frontend" href="step_3_create_frontend.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="step_5_final_notes.html" title="Step 5 - TODO final notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="step_3_create_frontend.html" title="Step 3 - TODO frontend"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">fantastico 0.6.0-b134 documentation</a> &raquo;</li>
          <li><a href="../how_to.html" >How to articles</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Creating a simple TODO application</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="step-4-todo-activate-google-analytics">
<h1>Step 4 - TODO activate google analytics<a class="headerlink" href="#step-4-todo-activate-google-analytics" title="Permalink to this headline">¶</a></h1>
<p>In this step of the tutorial we are going to activate frontend tracking solution for our newly created <strong>TODO</strong> application.
One solution would be to create a template page and included in your other pages using {% component %} tag. A more elegant solution
which does not require any code redeployment is presented below:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">git checkout -b step-4-activate-googleanalytics</p>
</li>
<li><p class="first">fsdk activate-extension &#8211;name tracking_codes &#8211;comp-root todo</p>
</li>
<li><p class="first">Paste the following code under fantastico-todo/todo/sql/create_data.sql:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="o">##############################################################################################################################</span>
<span class="o">#</span> <span class="n">Copyright</span> <span class="mi">2013</span> <span class="n">Cosnita</span> <span class="n">Radu</span> <span class="n">Viorel</span>
<span class="o">#</span>
<span class="o">#</span> <span class="n">Permission</span> <span class="k">is</span> <span class="n">hereby</span> <span class="k">granted</span><span class="p">,</span> <span class="k">free</span> <span class="k">of</span> <span class="n">charge</span><span class="p">,</span> <span class="k">to</span> <span class="k">any</span> <span class="n">person</span> <span class="n">obtaining</span> <span class="n">a</span> <span class="k">copy</span> <span class="k">of</span> <span class="n">this</span> <span class="n">software</span> <span class="k">and</span> <span class="n">associated</span>
<span class="o">#</span> <span class="n">documentation</span> <span class="n">files</span> <span class="p">(</span><span class="n">the</span> <span class="ss">&quot;Software&quot;</span><span class="p">),</span> <span class="k">to</span> <span class="n">deal</span> <span class="k">in</span> <span class="n">the</span> <span class="n">Software</span> <span class="k">without</span> <span class="n">restriction</span><span class="p">,</span> <span class="k">including</span> <span class="k">without</span> <span class="n">limitation</span>
<span class="o">#</span> <span class="n">the</span> <span class="n">rights</span> <span class="k">to</span> <span class="n">use</span><span class="p">,</span> <span class="k">copy</span><span class="p">,</span> <span class="k">modify</span><span class="p">,</span> <span class="n">merge</span><span class="p">,</span> <span class="n">publish</span><span class="p">,</span> <span class="n">distribute</span><span class="p">,</span> <span class="n">sublicense</span><span class="p">,</span> <span class="k">and</span><span class="o">/</span><span class="k">or</span> <span class="n">sell</span> <span class="n">copies</span> <span class="k">of</span> <span class="n">the</span> <span class="n">Software</span><span class="p">,</span>
<span class="o">#</span> <span class="k">and</span> <span class="k">to</span> <span class="n">permit</span> <span class="n">persons</span> <span class="k">to</span> <span class="n">whom</span> <span class="n">the</span> <span class="n">Software</span> <span class="k">is</span> <span class="n">furnished</span> <span class="k">to</span> <span class="k">do</span> <span class="n">so</span><span class="p">,</span> <span class="n">subject</span> <span class="k">to</span> <span class="n">the</span> <span class="n">following</span> <span class="n">conditions</span><span class="p">:</span>
<span class="o">#</span>
<span class="o">#</span> <span class="n">The</span> <span class="n">above</span> <span class="n">copyright</span> <span class="n">notice</span> <span class="k">and</span> <span class="n">this</span> <span class="n">permission</span> <span class="n">notice</span> <span class="n">shall</span> <span class="n">be</span> <span class="n">included</span> <span class="k">in</span> <span class="k">all</span> <span class="n">copies</span> <span class="k">or</span> <span class="n">substantial</span> <span class="n">portions</span> <span class="k">of</span> <span class="n">the</span> <span class="n">Software</span><span class="p">.</span>
<span class="o">#</span>
<span class="o">#</span> <span class="n">THE</span> <span class="n">SOFTWARE</span> <span class="k">IS</span> <span class="n">PROVIDED</span> <span class="ss">&quot;AS IS&quot;</span><span class="p">,</span> <span class="k">WITHOUT</span> <span class="n">WARRANTY</span> <span class="k">OF</span> <span class="k">ANY</span> <span class="n">KIND</span><span class="p">,</span> <span class="n">EXPRESS</span> <span class="k">OR</span> <span class="n">IMPLIED</span><span class="p">,</span> <span class="k">INCLUDING</span> <span class="n">BUT</span> <span class="k">NOT</span> <span class="n">LIMITED</span> <span class="k">TO</span> <span class="n">THE</span>
<span class="o">#</span> <span class="n">WARRANTIES</span> <span class="k">OF</span> <span class="n">MERCHANTABILITY</span><span class="p">,</span> <span class="n">FITNESS</span> <span class="k">FOR</span> <span class="n">A</span> <span class="n">PARTICULAR</span> <span class="n">PURPOSE</span> <span class="k">AND</span> <span class="n">NONINFRINGEMENT</span><span class="p">.</span> <span class="k">IN</span> <span class="k">NO</span> <span class="n">EVENT</span> <span class="n">SHALL</span> <span class="n">THE</span> <span class="n">AUTHORS</span> <span class="k">OR</span>
<span class="o">#</span> <span class="n">COPYRIGHT</span> <span class="n">HOLDERS</span> <span class="n">BE</span> <span class="n">LIABLE</span> <span class="k">FOR</span> <span class="k">ANY</span> <span class="n">CLAIM</span><span class="p">,</span> <span class="n">DAMAGES</span> <span class="k">OR</span> <span class="n">OTHER</span> <span class="n">LIABILITY</span><span class="p">,</span> <span class="n">WHETHER</span> <span class="k">IN</span> <span class="n">AN</span> <span class="n">ACTION</span> <span class="k">OF</span> <span class="n">CONTRACT</span><span class="p">,</span> <span class="n">TORT</span> <span class="k">OR</span> <span class="n">OTHERWISE</span><span class="p">,</span>
<span class="o">#</span> <span class="n">ARISING</span> <span class="k">FROM</span><span class="p">,</span> <span class="k">OUT</span> <span class="k">OF</span> <span class="k">OR</span> <span class="k">IN</span> <span class="k">CONNECTION</span> <span class="k">WITH</span> <span class="n">THE</span> <span class="n">SOFTWARE</span> <span class="k">OR</span> <span class="n">THE</span> <span class="n">USE</span> <span class="k">OR</span> <span class="n">OTHER</span> <span class="n">DEALINGS</span> <span class="k">IN</span> <span class="n">THE</span> <span class="n">SOFTWARE</span><span class="p">.</span>
<span class="o">##############################################################################################################################</span>

<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">tracking_codes</span> <span class="k">WHERE</span> <span class="n">provider</span> <span class="o">=</span> <span class="s1">&#39;Google Analytics&#39;</span><span class="p">;</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tracking_codes</span><span class="p">(</span><span class="n">provider</span><span class="p">,</span> <span class="n">script</span><span class="p">)</span>
<span class="k">SELECT</span> <span class="s1">&#39;Google Analytics&#39;</span><span class="p">,</span> <span class="s1">&#39;</span>
<span class="s1">    &lt;script type=&quot;text/javascript&quot;&gt;</span>
<span class="s1">         var _gaq = _gaq || [];</span>
<span class="s1">         _gaq.push([&quot;_setAccount&quot;, &quot;UA-XXXXX-X&quot;]);</span>
<span class="s1">         _gaq.push([&quot;_trackPageview&quot;]);</span>

<span class="s1">         (function() {</span>
<span class="s1">           var ga = document.createElement(&quot;script&quot;); ga.type = &quot;text/javascript&quot;; ga.async = true;</span>
<span class="s1">           ga.src = (&quot;https:&quot; == document.location.protocol ? &quot;https://ssl&quot; : &quot;http://www&quot;) + &quot;.google-analytics.com/ga.js&quot;;</span>
<span class="s1">           var s = document.getElementsByTagName(&quot;script&quot;)[0]; s.parentNode.insertBefore(ga, s);</span>
<span class="s1">         })();</span>
<span class="s1">    &lt;/script&gt;&#39;</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first">fsdk syncdb -d /usr/bin/mysql -p todo</p>
</li>
<li><p class="first">Paste the following code at the end of fantastico-todo/todo/frontend/views/listing.html (before &lt;/body&gt; tag):</p>
<div class="highlight-html"><div class="highlight"><pre>{% component url=&quot;/tracking-codes/ui/codes/&quot; %}{% endcomponent %}
</pre></div>
</div>
</li>
<li><p class="first">. pip-deps/bin/activate</p>
</li>
<li><p class="first">fantastico_run_dev_server</p>
</li>
<li><p class="first">Done. Access <a class="reference external" href="http://localhost:12000/frontend/ui/index">http://localhost:12000/frontend/ui/index</a> and view page source. You should be able to see the tracking code from above.</p>
</li>
</ol>
</div></blockquote>
<div class="section" id="explanation">
<h2>Explanation<a class="headerlink" href="#explanation" title="Permalink to this headline">¶</a></h2>
<p>By default, Fantastico framework provides an extension which can easily integrate tracking codes into components. The real advantage
of using this component comes from the fact that you can easily have one or multiple tracking scripts for multiple providers. Moreover,
you can manage tracking scripts at database level meaning you will never have to redeploy your code for tracking changes.</p>
<p>You can read more about tracking codes extension on <a class="reference internal" href="../../features/components/tracking_codes/tracking_codes.html"><em>Tracking codes</em></a>.</p>
</div>
<div class="section" id="known-issues">
<h2>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<p>If you are using a Fantastico version prior to 0.5.1 you will run into problems when running <strong>fdsk syncdb</strong> command. In order to fix this,
you must manually drop from your database the following tables:</p>
<blockquote>
<div><ul class="simple">
<li>sample_resource_subresources</li>
<li>sample_resources</li>
</ul>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Step 4 - TODO activate google analytics</a><ul>
<li><a class="reference internal" href="#explanation">Explanation</a></li>
<li><a class="reference internal" href="#known-issues">Known issues</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="step_3_create_frontend.html"
                        title="previous chapter">Step 3 - TODO frontend</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="step_5_final_notes.html"
                        title="next chapter">Step 5 - TODO final notes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/how_to/todo/step_4_activate_googleanalytics.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="step_5_final_notes.html" title="Step 5 - TODO final notes"
             >next</a> |</li>
        <li class="right" >
          <a href="step_3_create_frontend.html" title="Step 3 - TODO frontend"
             >previous</a> |</li>
        <li><a href="../../index.html">fantastico 0.6.0-b134 documentation</a> &raquo;</li>
          <li><a href="../how_to.html" >How to articles</a> &raquo;</li>
          <li><a href="index.html" >Creating a simple TODO application</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2013, Radu Viorel Cosnita.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42788125-1', 'rcosnita.github.io');
  ga('send', 'pageview');
</script>

  </body>
</html>